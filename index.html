<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chetana - The student voice of IISERBPR</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap">
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
</head>
<body>
<header>
  <nav class="topnav">
    <a href="index.html" class="logo">
      <img src="images/logo2.PNG" alt="Chetana Logo">
    </a>
    <div class="nav-links">
      <a class="active" href="index.html">Home</a>
      <a href="articles.html">Blog</a>
      <a href="events.html">Events</a>
      <a href="https://chetanamagazine.github.io/create.html?id=6" target="_blank">About</a>
    </div>
    <div class="search-container">
      <form action="/search" method="get">
        <input type="text" name="query" placeholder="Search..." aria-label="Search">
        <button type="button" aria-label="Search"><i class="fas fa-search"></i></button>
      </form>
    </div>
  </nav>
</header>

  <main>
    <section id="hero" class="hero">
      <div class="hero-content">
        <div class="issue-container">
          <div class="issue active">
            <img src="images/logo1.PNG" alt="Chetana Logo" class="hero-logo">
            
            <a href="#articles" class="cta-button">READ LATEST ISSUES</a>
</div>
          <div class="issue">
            <img src="images/logo1.PNG" alt="Chetana Logo" class="hero-logo">

            
            <a href="#articles" class="cta-button">READ LATEST ISSUES</a>
             </div>
          <div class="issue">
            <img src="images/logo1.PNG" alt="Chetana Logo" class="hero-logo">
            <a href="#articles" class="cta-button">READ LATEST ISSUES</a>
            
          </div>
        </div>
        <button class="nav-arrow prev"><i class="fas fa-chevron-left"></i></button>
        <button class="nav-arrow next"><i class="fas fa-chevron-right"></i></button>
      </div>
    </section>

    <section id="articles" class="articles">
      <h2>FEATURED ARTICLES</h2>
      <div id="featured-articles" class="article-grid">
        <!-- Featured articles will be dynamically inserted here -->
      </div>
    </section>

    <section id="tag-search" class="tag-search">
      <h2>EXPLORE ARTICLES BY TAGS</h2>
      <div id="tags" class="tags">
        <button class="tag active" data-tag="all">All</button>
        <button class="tag active" data-tag="Our Opinion">Our Opinion</button>
        <button class="tag active" data-tag="In Jest">In Jest</button>
        <button class="tag active" data-tag="Academic Experience">Academic Experience</button>
        <button class="tag active" data-tag="Review">Review</button>
        <button class="tag active" data-tag="research">research</button>
        <button class="tag active" data-tag="lifestyle">Lifestyle</button>
        <!-- Other tags will be dynamically inserted here -->
      </div>
    </section>

    <section id="articles-list" class="articles-list">
      <!-- Articles will be dynamically inserted here -->
    </section>
  </main>

  <footer id="footer">
    <div class="footer-content">
      <div class="col col1">
        <a href="index.html">
          <img src="images/logo1.PNG" alt="Chetana Logo">
        </a>
        <p>The student voices of IISER-BPR</p>
        <div class="social">
          <a href="https://www.instagram.com/iiser_chetana?igsh=MTB2bWxwdmsxbm16ag==" target="_blank" class="link"><i class="fab fa-instagram"></i></a>
          <a href="https://x.com/Chetana1681704?t=wsBsry0_9dsKedult-JXAw&s=09" target="_blank" class="link"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
      <div class="col col2">
        <h4>QUICK LINKS</h4>
        <ul>
          <li><a href="https://chetanamagazine.github.io/create.html?id=6">About</a></li>
          <li><a href="https://forms.gle/VVHeMwqaMX6tgbrm8">Submit an Article</a></li>
          <li><a href="#join">Join Our Team</a></li>
          <li><a href="#feedback">Feedback</a></li>
        </ul>
      </div>
      <div class="col col4">
        <h4>STAY UPDATED</h4>
        <form class="newsletter-form">
          <input type="email" placeholder="Enter your email" required>
          <button type="submit">SUBSCRIBE</button>
        </form>
      </div>
    </div>
  </footer>

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
 
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
  <script src="./script.js"></script>
<script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDFFnty5U0xdzBvZiYV13qehrNH9udnw50",
      authDomain: "chetana-a9033.firebaseapp.com",
      projectId: "chetana-a9033",
      storageBucket: "chetana-a9033.appspot.com",
      messagingSenderId: "86084685111",
      appId: "1:86084685111:web:ba5f162fcf8f17cf4b9eb2",
      measurementId: "G-Q65KS1DJVS"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Initialize Firestore
    const db = firebase.firestore();

    // Fetch and display articles
   // Fetch and display articles
function fetchArticles() {
  db.collection("articles id").get().then((querySnapshot) => {
    let featuredArticles = "";
    let allArticles = "";
    let tags = new Set(["all"]);

    let featuredCount = 0; // To limit featured articles
    let exploreByTagCount = 0; // To limit articles by tag

    querySnapshot.forEach((doc) => {
      const article = doc.data();
      const articleHtml = createArticleHtml(article, doc.id);

      // Limit to 4 featured articles
      if (article.featured && featuredCount < 4) {
        featuredArticles += articleHtml;
        featuredCount++;
      }

      allArticles += createArticleListItem(article, doc.id);

      article.tags.forEach(tag => tags.add(tag));
    });

    document.getElementById("featured-articles").innerHTML = featuredArticles;
    document.getElementById("articles-list").innerHTML = allArticles;

    // Add event listeners to tags
    document.querySelectorAll('.tag').forEach(tagButton => {
      tagButton.addEventListener('click', () => filterArticles(tagButton.dataset.tag));
    });

    // Make article tiles clickable
    makeArticlesClickable();
  }).catch((error) => {
    console.error("Error fetching documents: ", error);
  });
}


function createArticleHtml(article, id) {
  return `
    <article class="article-card" data-article-id="${id}">
      <div class="article-image" style="background-image: url('${article.image}');"></div>
      <h3>${article.name}</h3>
      <p>${article.description}</p>
      <a href="create.html?id=${id}" class="read-more">READ MORE</a>
    </article>
  `;
}

function createArticleListItem(article, id) {
  return `
    <article class="article-item" data-tags="${article.tags.join(' ')}" data-article-id="${id}">
      <div class="article-image" style="background-image: url('${article.image}');"></div>
      <div class="article-content">
        <h3>${article.name}</h3>
        <p>${article.description}</p>
        <div class="article-tags">
          ${article.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
        </div>
        <a href="create.html?id=${id}" class="read-more">READ MORE</a>
      </div>
    </article>
  `;
}

function filterArticles(tag) {
  const articles = document.querySelectorAll('.article-item');
  let visibleCount = 0;

  articles.forEach(article => {
    if (visibleCount < 6 && (tag === 'all' || article.dataset.tags.includes(tag))) {
      article.style.display = 'flex';
      visibleCount++;
    } else {
      article.style.display = 'none';
    }
  });
  document.querySelectorAll('.tag').forEach(tagButton => {
    tagButton.classList.toggle('active', tagButton.dataset.tag === tag);
  });
}

function makeArticlesClickable() {
  const articleElements = document.querySelectorAll('.article-card,.article-image, .article-content, .article-item');
  
  articleElements.forEach(article => {
    article.addEventListener('click', function(e) {
      // Prevent the default action for all elements except the read more button and tag buttons
      if (!e.target.classList.contains('read-more') && !e.target.classList.contains('tag')) {
        e.preventDefault();
        
        // Get the article ID from the data attribute
        const articleId = this.dataset.articleId;
        
        // Redirect to the article page
        window.location.href = `create.html?id=${articleId}`;
      }
    });
  });
}

// Call fetchArticles when the page loads
document.addEventListener('DOMContentLoaded', fetchArticles);
  </script>
</body>
</html>
